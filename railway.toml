# Railway Configuration for Plaet API
[build]
builder = "NIXPACKS"
buildCommand = "npm run build"

[deploy]
startCommand = "npm start"
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10

[env]
NODE_ENV = "production"
PORT = "8080"

# Database Configuration (Railway PostgreSQL)
DATABASE_URL = "${{postgresql.DATABASE_URL}"

# Application Configuration
APP_URL = "${{RAILWAY_PUBLIC_DOMAIN}/api/v1"
JWT_SECRET = "${{secrets.JWT_SECRET}"
SALT_ROUNDS = "10"
JWT_ACCESS_EXPIRATION_MINUTES = "30"
JWT_ACCESS_EXPIRATION_DAYS = "7"

# CORS Configuration  
ALLOWED_ORIGINS = "${{RAILWAY_PUBLIC_DOMAIN},https://www.plaet.cloud,https://plaet.cloud"

# Health Check
HEALTH_CHECK_ENDPOINT = "/api/health"

[variables]
# Railway automatically provides these variables:
# - RAILWAY_PUBLIC_DOMAIN: Your app's public URL
# - RAILWAY_SERVICE_NAME: Your service name  
# - RAILWAY_PROJECT_NAME: Your project name
# - postgresql.DATABASE_URL: PostgreSQL connection string

# Static Assets (if needed for future frontend)
# [statics]
# publicDir = "public"

# Log Configuration
[logs]
# [logs] # Configure logs if needed

# Custom Domain (optional)
# [domains]
# { domain = "api.tu-dominio.com" }