# Railway Configuration for Plaet API
# Versión corregida con credenciales válidas de Railway

[build]
buildCommand = "npm run build"

[deploy]
startCommand = "npx prisma db seed && npm start"
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10

[env]
NODE_ENV = "production"
PORT = "8080"

# Database Configuration - Usando variables automáticas de Railway
DATABASE_URL = "${{postgresql.DATABASE_URL}}"

# Application Configuration (using api.plaet.cloud subdomain)
APP_URL = "https://api.plaet.cloud/api/v1"

# CORS Configuration - only allow frontend domain
ALLOWED_ORIGINS = "https://plaet.cloud,https://www.plaet.cloud"

# Health Check
HEALTH_CHECK_ENDPOINT = "/api/health"

# Use Node.js 18 for compatibility
NODE_VERSION = "18"